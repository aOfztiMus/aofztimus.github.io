if (window.acf) {
	window.acf.addAction('render_block_preview', galleryCarouselSplide);
}

document.addEventListener('DOMContentLoaded', galleryCarouselSplide);

function galleryCarouselSplide() {
	const galleryCarouselElms = document.getElementsByClassName('gallery-carousel-splide');

	for (var i = 0; i < galleryCarouselElms.length; i++) {
		const autoplay = galleryCarouselElms[i].parentElement.dataset.autoplay;
		const duration = galleryCarouselElms[i].parentElement.dataset.duration;

		new Splide(galleryCarouselElms[i], {
			destroy: true,
		}).mount();

		new Splide(galleryCarouselElms[i], {
			arrows: true,
			autoplay: autoplay,
			interval: duration,
			mediaQuery: 'min',
			perPage: 2,
			gap: 16,
			breakpoints: {
				768: {
					perPage: 3,
				},
				992: {
					perPage: 4,
				},
			}
		}).mount();
	}
}
