if( window.acf ) {
	window.acf.addAction( 'render_block_preview', iconCarouselSplide );
}

document.addEventListener( 'DOMContentLoaded', iconCarouselSplide );

function iconCarouselSplide() {
	const iconCarouselElms = document.getElementsByClassName( 'icon-carousel-splide' );

	for ( var i = 0; i < iconCarouselElms.length; i++ ) {
		const autoplay = iconCarouselElms[i].parentElement.dataset.autoplay;
		const duration = iconCarouselElms[i].parentElement.dataset.duration;

		new Splide( iconCarouselElms[i], {
			destroy: true,
		}).mount();

		new Splide( iconCarouselElms[i], {
			type: 'loop',
			autoplay: autoplay,
			interval: duration,
			gap: 16,
			mediaQuery: 'min',
			perPage: 2,
			gap: 16,
			breakpoints: {
				768: {
					perPage: 4,
				},
				992: {
					perPage: 6,
				},
			}
		}).mount();
	}
}
